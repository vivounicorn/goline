package server

import (
	"strconv"
	"bufio"
	"io"
	"goline/trainer"
	"goline/predictor"
	"goline/util"
	"io/ioutil"
	"os"
	"net/http"
	"fmt"
	"errors"
	"encoding/json"
	s"strings"
)

type Lands struct {
//	pool    *redis.Pool
	mux 	map[string]func(http.ResponseWriter, *util.ModelParam)
	conf	*Config
}

type Config struct {
	DataPathBase		string		`json:"DataPathBase"`
}

const (
	JsonError = "{\"returncode\": 1,\"message\": \"%s\",\"result\": []}"
)

func (lan *Lands) Initialize(configFile string) error{
	lan.mux = make(map[string]func(http.ResponseWriter, *util.ModelParam))
    lan.mux["/online"] = lan.onlineServeHttp
    lan.mux["/offline"] = lan.offlineServeHttp
	
	file, err := ioutil.ReadFile(configFile)
	if err != nil {
		return errors.New("[Initialize]Open Config error.")
	}

	temp := new(Config)
	if err = json.Unmarshal(file, temp); err != nil {
		return errors.New("[Initialize]Parse config file error.")
	}
	
	lan.conf = temp
	
	return nil
}

func (lan *Lands) checkData(filename string) error{
	count := 0
	fs, err := os.Open(filename)
	if err != nil {
		return errors.New("[OpenFile] Open file failed.")
	}
	
	buf :=bufio.NewReader(fs)
	
	line, err := buf.ReadString('\n')
	line = s.TrimSpace(line)
	sp := s.Split(line, " ")
	count++
	if len(sp) <= 1 {
		str := fmt.Sprintf("[spliter must be space] file %s,line %d,content %s", filename, count, line)
		return errors.New(fmt.Sprintf(JsonError, str))	//分隔符错误(不是space)
	}
	
	label, err := strconv.Atoi(sp[0])
	if err != nil || (label != 0 && label != 1) {
		str := fmt.Sprintf("[label must be 0/1] file %s,line %d,content %s", filename, count, sp[0])
		return errors.New(fmt.Sprintf(JsonError, str))	//标注错误(不是0或1)
	}
	
	for i:=1; i<len(sp); i++ {
		tup := s.Split(sp[i], ":")
		if len(tup) != 2 {
			str := fmt.Sprintf("[feature value must be key:value] file %s,line %d,content %s", filename, count, sp[i])
			return errors.New(fmt.Sprintf(JsonError, str))	//特征格式错误(不是key:value)	
		}
	}
	
  	if err != nil { //遇到任何错误立即返回，并忽略 EOF 错误信息
   		if err == io.EOF {
    		return nil
		} else {
			return err
		}
	}
	
	return nil
}

func (lan *Lands) onlineServeHttp(w http.ResponseWriter, r *util.ModelParam) {
	model := "{\"Alpha\":0.1,\"Beta\":1,\"L1\":10,\"L2\":10,\"Featnum\":811,\"Dropout\":0.1,\"N\":[52193.605381118476,11729.847116590978,0,0,0,0,0,0,0,0,0,0,0,0,0,2015.3825828992192,0,0,2002.2899487258958,0,0,1838.6928519732144,0,1800.5511243945866,1351.996103436583,0,1428.333790748062,1335.0721359670772,1149.781780389559,1172.8608443662063,990.5172176521138,976.0159654475125,1073.2371497873628,1635.672924404504,1019.6872065523231,1517.6253121162492,757.4788262073383,1234.806230481251,1290.9617465961603,1121.000649020948,1460.6362490226181,1008.0859420559481,1175.633720134222,1463.152397063257,1236.1120245005332,1503.884870259171,1485.5333724923503,1486.346772987114,1111.120547711696,1394.4072523189611,1445.511607877332,12406.073167943008,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,943.5557068522992,2255.9358469093277,0,0,2188.684607171208,0,1945.4276576363075,0,1821.3685624966868,1369.3976919827157,0,1422.6740770278732,1256.8433020496159,1279.4576587906809,1074.1153780489778,922.2188788276568,845.4389852184421,1781.1077480614924,900.4344796151254,1609.30648076731,1203.2034630663318,576.0527011823607,1232.994058221462,1617.6120642860965,1001.3539781254575,1512.1873188401435,1397.4829961181256,1305.5926784259852,1061.2024760448728,1534.2254459967346,1755.353912767331,1008.0893156748281,1460.1529353512262,1521.7400184052624,11731.255082405989,0,0,0,0,0,0,0,0,0,0,0,0,0,456.37517066809824,976.3118887928465,898.4877440725576,911.4157618422107,1130.4837740415082,1238.7371031256262,1337.0720677865313,1200.2453678127192,1099.0050645469548,1379.7333482099564,1143.668431951802,937.1430722123258,1080.5521185687114,1247.936661575889,1043.0985987807853,1079.7624193077963,1163.5039110660744,1149.458238610635,1183.2326362233146,1043.4921326824035,1345.1457910091467,1241.459613043667,1090.2841530912767,1124.5034035495019,1142.261972400815,1298.7579116827887,1082.7444792472106,1208.290325711531,1185.2503084731966,1122.2120061477733,1205.6357983537123,1248.2969538839045,1022.9984182538601,1223.2421653787155,1138.4971216665178,1102.8571633726513,11730.782117689341,0,0,0,0,0,0,0,0,0,0,0,0,0,422.4634418059913,803.6380011209304,915.4452017228356,1027.0618140384775,1103.7914636619828,1134.5719547541105,1176.5512184416434,1226.019845077127,946.9370888266989,979.9001011257637,1002.6567701783579,977.6690477219918,887.4665197855772,979.3814158059454,1068.9158648253524,1004.4161690032578,1066.212413967463,1035.2665732947025,1032.5474374744244,893.954807722667,1012.8621684833962,993.8318537631583,938.6089690126942,1217.22000233785,1226.3227134347708,1174.5410442821806,1367.7387354467674,1301.009944944536,1217.7292025315198,1310.234690139856,1299.2504740432767,1464.4221946661426,1538.6745469990035,1433.2614706382303,1591.3180305310566,1709.7310391344993,12406.959736019924,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,909.5550812688517,1138.9807236107326,932.2184277654846,1287.4533472228043,1120.8753178721734,1555.1954205151258,1236.8877532281936,1346.90029472433,1126.9851333799857,952.9968626007737,1075.875527443754,1177.542617693428,1129.1044165507622,1010.2313613889156,1188.547533551988,1072.9467455476963,1184.785005292316,1229.1546990068935,1346.3110035421907,1125.1672753774048,1055.9390501284508,1224.5377550833698,1229.1524518681088,1152.58644439354,1337.2461344924332,1423.8251625835342,1124.106447080361,1177.180487628088,1288.976970168935,1196.3619334340501,1209.0477445249423,947.6229081544516,1255.6623993117387,1034.862444704702,12407.501697893902,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,844.3374857427898,847.3560729737744,1113.8047911192366,1377.979033692699,1118.0674771336476,1134.9816034661667,1162.4899962473419,883.1807797198722,1041.590015617815,1103.9030896916195,977.1345981771209,870.6221188092189,980.1605247438622,1098.5620895547202,1016.6617158066324,948.7090790805817,1091.2439397289627,982.8546740101867,984.2289367864174,944.6100471333857,1107.9448309953061,1154.19253435816,1216.4313992018251,1342.0534977767654,1174.9670266128855,1254.8490018773361,1351.1051758178705,1319.5671561513552,1338.2440381917813,1534.0152327821856,1491.48568913904,1668.8908831214965,1579.4849867532444,1748.2700355509926,12407.251904790915,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1527.5377766451033,0,1457.9141179925311,1289.0019598755805,1048.5107017076168,967.0821157743434,1608.628022275037,635.7527061898448,1625.4716445582703,939.5167973747709,1256.1228167245413,1047.55733354138,1168.4348961162602,1124.4241857081372,861.6075668871872,1269.1670845721615,1081.2718006388102,1313.7269748900067,1096.9862175887479,1080.9319256472288,1487.7435761709667,1232.783275624374,1286.2713135487945,1365.391631844538,1103.3141847129032,1226.7182955058051,1456.279273475044,1168.2272924187691,1357.1807265951586,1170.154633110366,1320.1976476262298,1105.7539783618424,1161.6047700534327,966.6535343710425,12407.699522955232,0,0,0,0,0,0,0,0,1933.779534996253,1969.7096455530377,772.1943545375715,2237.807041218062,1630.3184691780436,2191.3866051950386,1642.4890809547485,1822.695011290104,1924.4257656779575,1746.3034316473797,1745.7813128564799,1816.4907261685323,1914.7991523424794,1898.893925018478,2064.344578327809,2014.9093322987871,1800.6004682245718,2166.9075641744303,2096.5039042891835,2146.198300555497,2269.4421702230193,12417.898714914263,0,0,0,0,0,0,0,0,1432.655176005145,1586.5482108050821,1162.8858739354255,1855.218399842717,1574.1443653359652,1649.3504253034573,1565.1207819582244,1785.6672322447262,1627.6905156956211,1682.5761200949623,1659.3979415237266,1704.6545476945166,1796.6851016931162,2054.1591241855067,1930.2459170391212,2129.6518054579747,2061.072959646343,2367.593200922659,2476.5323871614005,2699.5821535875953,2993.3854749659267,21765.72966673276,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3291.9937804852034,0,0,2191.694127096649,0,1673.0836721664436,1641.1407414135172,1259.2194073362464,1114.5286544794685,892.5719575994171,1372.7042147263185,1256.2932570480837,1125.732009360756,1814.9230760981347,1405.1102366230316,1246.763696929575,1642.8279372690172,1880.0923638613197,1682.1864480830932,1697.1413724656593,1588.609416300797,1669.7119734752011,25982.50801023604,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3455.200130827235,0,0,2024.8446252399217,0,1608.758630273036,1522.9701333272117,1275.6497426644064,1797.3949966294133,1602.8720207097358,1440.6327184229754,1496.980977101639,1478.9772563056463,1716.9560801510172,1565.0721578270607,1203.5299699453487,1180.965979882934,1394.1838451520662,1465.3117284531477,7501.078065628082,0,0,0,0,0,0,1274.8771767344138,797.387809192721,672.908674445757,908.6093423354567,880.7901253127335,1073.2898923156113,1058.652245651488,997.47907712509,1160.1287124576843,1079.3289010808694,1050.1580824495313,1134.9106607732276,1091.8135156091635,1044.2037668406947,1186.2592733239833,1285.2716728073895,1262.2310082887982,1275.4423759346087,1273.597930795579,1210.6710072007063,1238.5308362134813,1196.937829568692,1190.0606650304517,1148.3114846579128,1234.9866278441016,1239.5158262027699,1117.896484425929,1146.140369514092,983.6921865725228,1107.7496212983874,946.3154440783622,952.7825714910523,856.1720253481604,973.8300000763547,873.7482506665609,923.5100949258639,991.7777734964199,941.4834121697216,844.6978467631454,765.214115141193,768.4697154587183,821.6304997487839,729.7419610097152,18577.93850095205,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1133.3714987384483,1334.65785014324,1045.124569141942,840.5277941835378,929.3879655751737,1452.0310587411066,1198.795983265581,1741.614031398193,1240.0255196286346,1208.3920626487213,1233.3538055257159,1318.5204669674765,1354.5706572141999,1398.6057835889778,1281.9642411048908,1509.2747011416368,1444.2343154871714,1411.4258458982429,1519.0698571305866,1569.3513530821024,1683.8601597431618,1433.8145699021693,1717.3932102874426,1516.0544425969053,1118.1982248784948,19237.328723180297,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3079.1865859985824,0,0,2336.7077291379082,0,1669.1915495251715,0,1473.689786821098,1331.2649858730954,1252.9737527375328,1898.8194186789758,909.4391385904651,1482.7345904306942,1244.4385046534426,1452.7694085762985,1306.6985377716921,1348.5173771575214,1189.2526967485032,1704.7982187032171,1492.7935122314007,1395.4153382571021,1557.4009475394703,1672.4082939271095,1637.4608368010192,1538.4610793695751,7618.202298826257,0,0,0,0,0,0,0,0,0,0,0,0,3398.727734453255,0,0,1942.3624453172229,0,1217.6330813864026,1114.1922211188585,910.5476957187828,1444.2834597019696,565.5539090740483,1351.4942228419618,695.7678498091643,1121.542911844653,1119.1287956620074,982.5227344232228,1281.5927663393495,1166.1011935721688,957.7538503459253,1190.8018459348236,1191.2919159289743,1281.062044551896,1342.4874573626494,1085.3673619915428,1115.112166308217,1257.3300502814955,1330.9219094064217,1299.0502216121927,1276.4092110664496,1403.0485662643034,1155.458560857067,1327.0437051637678,1365.2168931453753,1566.4568858575606,1431.552711812406,1530.814770865119,1596.4722165939427,1579.962996837081,31502.49529159687,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3654.591126028785,0,1929.8261097024583,0,1403.9561838376283,1271.1426005813871,1212.8155526327184,1903.364695924263,1715.5893670055234,1150.5057571783782,1782.6297503230967,1341.1792977112339,1751.1864102385953,1594.1644025730793,23222.51204311404,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2990.0280802669195,0,0,1856.2885448097556,0,1426.3716451618996,0,1468.0654049173556,1050.5616032028151,0,989.217689201093,916.4611518992008,1625.6859736878293,666.0960329894012,487.1169347636708,1038.6146137584485,585.7668016597527,1005.5203153671729,1346.7660743347951,651.486019529463,1057.8474317147184,920.003783278282,1121.5652518969948,930.2044153870968,1047.277902345324,1036.2208865417185,959.9368145762495,1140.3489435450845,1324.8940560740032,1347.736379287099],\"Z\":[3416.0193540650225,121.46314208194372,0,0,0,0,0,0,0,0,0,0,0,0,0,165.88410714143922,0,0,45.67066497352819,0,0,17.50809905752875,0,7.895268892571182,70.46452999836741,0,-17.328825589713652,20.951930789776043,55.45585492223426,0.5074589741997979,20.386700660003637,-13.371172482981711,-39.97412187995967,35.97547646915222,-58.277845992689414,-2.0161382676061095,-22.983290918143105,3.3047962402953,-31.541295816867596,-6.521297077079039,29.972999001084816,20.081243433769362,96.87837557191752,-12.476029476543244,-5.864173498451636,-8.223725768974335,-2.798922246092711,-43.194748530906814,45.319882623602865,6.029348718802912,-19.86872634743343,43.736754220706764,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,118.1384550813723,99.66546561168232,0,0,64.96974701951049,0,47.03281064492608,0,-40.694442397626105,42.44880160886382,0,10.295879073678009,21.10577688803607,-63.883016345883114,20.792048750402735,34.74204024589365,48.95251475437936,-19.44337675766877,-22.60686902113815,-18.183225733026234,34.6180528672113,30.48103668458853,-22.654728722234577,14.876238866628444,-10.4387417010875,-33.38139255806415,-35.30872605804908,-30.72175983189668,71.92001871213826,-18.43520190223084,21.206150507049497,56.02260800798788,-7.142622045892954,11.085344302589439,120.70378571463367,0,0,0,0,0,0,0,0,0,0,0,0,0,-101.89080567133907,-23.13869239489174,-103.17522956753167,-15.373333203052166,-25.762995154956034,-39.02835051339822,-57.906627251850665,-8.700596702517561,-13.101250582462752,-61.62586176152544,-14.883275658703845,51.2150903067755,40.215070882045,-16.93192339066507,58.65140305616362,38.63541449743933,31.68391697123938,41.25959978288674,77.9083422674901,89.48270146238262,-17.404610486966526,26.432847241823787,61.94656278253377,60.44347847922902,50.19300478154529,1.1295180671268918,88.48567540622682,29.70405206268019,43.67966843741569,33.31732752296838,43.18157137235534,5.072916633128792,48.09819067162941,-36.6990421260639,23.313897437812773,-0.5239689921140384,119.66540134124926,0,0,0,0,0,0,0,0,0,0,0,0,0,-65.39719722313313,28.72144549086476,28.73955957608649,-31.924803651364147,-36.91596960316746,-58.25544465370852,-57.300159969563566,-72.87788311106644,-10.85706064196185,5.2067372970548496,53.38602723669962,-2.10038757478915,11.513481241697129,-3.515528909345608,-23.27716315213125,16.880668537336177,25.03850542720451,53.9893220338523,9.279611608526581,73.61866532888065,43.66240710511543,65.03638693385811,79.81573879450136,29.438735283748397,8.030873102275942,35.36095778731039,4.749223081823097,31.18957697334632,62.20264087933963,34.14702923821119,33.22940240108593,4.26148939868043,-11.172594731455838,39.0952813121626,-61.05911150133759,-3.1204138284297294,39.632949723269576,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23.648588027439715,-95.21859618154045,-44.10763655675407,7.363579318944536,12.407130837316881,-118.46379681639105,-42.36435146653212,-71.20064470378117,31.171673624868102,39.01009647194306,-29.5054092932973,-36.712266519613976,10.748236901443704,45.83453913096429,-6.1107659493210456,42.75727438018232,10.437840132627853,14.171196260592337,-32.0493221698718,63.09294525032221,68.68152214589463,25.848432986868534,32.6280699758748,37.574320820948635,19.219675997773358,-48.25727030102896,52.331822686984665,63.355919567966694,19.4069584878477,46.32134493997693,45.57346084371687,91.61906869304217,16.539460403728448,24.10399423097911,42.18454794183737,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20.905354678608784,-6.49262919461709,4.7683965179402374,-44.14021577905164,17.210706188135045,-10.482395630501522,-48.80580863665226,54.122541670218084,-10.907231881657767,-40.09588418647511,5.296231260226338,15.61250283978399,16.913650940636785,-18.505394556016157,-0.7251889426914196,46.98072005292351,-10.68764025417817,37.67643362567527,50.0353755297271,53.54347205223934,-15.611432042278325,23.30510373587732,-1.0082462004706574,13.769467021269381,61.23478075974896,43.799730911541836,28.06008259012419,13.662813541790364,15.08727622843062,-4.966928835454533,20.000609081948745,-18.345803401820024,18.182049842760037,1.1839575242343048,44.04854786533959,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35.61172715904194,0,-40.75360714895144,-52.82213274426556,10.254075995799473,-40.394008642009695,-13.723135890220078,34.61476893779436,5.677145246416915,-20.59334009257654,-4.022869693272238,-10.626406703664475,-63.833541966140245,31.497693136719025,10.781445255025849,18.704481663313043,2.699456472789304,-32.660089522262815,36.28683347730861,13.714763811543028,-54.591949893772735,-50.60650596730903,13.638824679144216,-8.484726901973158,34.675474775260504,23.49587367008315,-8.502515214902212,37.42439330916466,40.378473458166035,117.72324248258512,47.29875570277554,93.6551473111478,85.04802776062746,110.40290332299335,41.32352836915989,0,0,0,0,0,0,0,0,-115.78896000901162,86.46752002576424,-55.773629371952055,-0.9395043206527798,80.92985084673731,4.635105087009902,64.45943632538444,96.0336572353321,34.840255875951264,88.57536309559649,65.98022177248383,73.98777577039708,47.77218790597961,51.29465504793753,50.77692848313467,15.943969122038316,82.56416708817801,3.4347119465041582,-39.479088694943144,-15.134904289249581,-37.046271280915974,28.944847155962506,0,0,0,0,0,0,0,0,52.38464571889888,85.15899384842017,100.89458689614328,-30.986981731607077,81.1772885970481,33.61165784283154,51.12326082827648,43.42812421500924,73.54990654730466,53.68214552837876,56.71203626285826,47.83175081592512,45.32482039687311,-21.185392150989145,26.988572411692786,-21.837882663590285,4.90667162660037,-33.89349808875195,-39.21288685015306,-15.443782485575513,-60.365159198140965,521.305067608309,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109.38851542009779,0,0,79.07792963107204,0,56.99461121338743,-0.0068511809310247695,44.6295850594089,10.45455259371923,46.11233236180387,61.701208989080826,40.49559473628507,11.760146482642572,-20.16263507115697,44.20972215174367,76.62344612862427,-28.04890274142841,-44.90862945036846,-23.979882225123227,-41.87493447288501,8.402167350045453,-58.528879383976665,385.8072968908585,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,40.9700196159913,0,0,108.09263576289449,0,91.35682593567108,56.35626451880501,-9.294672844218585,55.99835959560987,6.436386306706641,-38.667124920648185,19.160170919758652,-20.603168680703952,-28.65470983120338,-23.13912285134717,79.95538495241162,117.84274376064002,73.28807335459231,37.51183315001538,-232.63352889791216,0,0,0,0,0,0,-162.36894069542038,-89.89423494098003,-59.46664562913711,-36.29980020905854,-46.0912966069683,-52.019194808077856,23.70290287185518,24.244477230533978,15.664518126244063,53.79177715318465,59.54045178603425,70.48942494067003,62.85701307588227,60.25909198096344,43.50303895766872,7.763287654207126,4.005304115740366,51.52343761505117,24.26191353938144,53.19502651766317,19.08406523318293,37.82951481400089,29.238952672036906,53.81829741904598,19.74446789851192,-21.737746877773535,36.469254560846146,25.030760547287013,38.349130292929296,-11.781187637844054,16.749664938748534,11.991076354528033,38.14006548300062,10.313065834704377,29.489441674895286,1.946964176464357,-29.24619816128107,-8.865076718678727,-7.274107731669099,41.84174716011693,48.317344608162486,31.479151296845405,26.3375117543741,216.93950927063096,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-16.055188473419747,-24.872275396146833,-4.66412986120408,46.66926659788151,62.87916756560243,-53.19643504940169,-26.28024327687259,-58.302138438750575,28.853603295380598,24.702378165963285,70.14715470494815,10.569826532369907,28.157600327759337,27.32483376842615,30.984201728049378,-37.25908601634125,32.67163046404038,22.2888825768319,-7.13104625903252,-25.017162495112917,33.10652511106281,41.50279746905917,-23.165198852048714,67.55807244742896,172.36266300491351,670.876823982386,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,207.07049691165233,0,0,75.02048158833381,0,80.83644557548747,0,41.62623347167245,30.10678692240948,-5.140683547471827,32.966220956757525,-18.300206384508627,26.00286297381712,39.808103205589546,44.73550929076687,20.531773531904257,32.15809875842427,-12.442046168339083,-40.98918578716233,-40.8130937410159,-8.261327265886758,-59.232342655486285,-50.98408853393052,-61.91791453717068,-34.85692181809322,396.04102025393854,0,0,0,0,0,0,0,0,0,0,0,0,168.68770641655058,0,0,151.0857105363448,0,167.57879135619186,57.3657211798027,39.956386407396565,20.315563324601847,39.08681840109116,69.75389290483011,52.86907247318592,-35.402278966289416,54.246953703600795,16.165580040129043,-9.652753723454753,-8.319738103671408,30.70008303648709,-14.600711821225204,-58.96587744451313,-83.5494428431981,-59.88854813837878,22.844619288266585,-15.859121101419941,-41.37242201901269,-58.18954586973816,-58.196401088326134,-41.85429236809804,-63.29505021155342,25.51016212938991,4.790696890917614,-21.593258590618678,-56.08620346601133,16.45359660207726,-41.730258678438,-57.149627181545895,19.020457192976796,825.8081647697229,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,57.14509065784128,0,60.780591166325095,0,76.40534223224861,24.14221184803772,-28.360030788412377,-30.38806162096442,68.02329962883483,83.6252441101848,39.31163328342427,72.63901272738687,60.17421513197733,84.07820619831843,-216.02272317158085,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,56.16951275108995,0,0,98.85430363870238,0,107.12304726016815,0,59.194355800792934,96.52722982766639,0,85.49436104378782,43.07475884764557,74.50437103522329,52.71305232262209,103.68399309490017,96.89477630028085,-7.752900100456427,47.32201990633939,-28.436295150961563,47.68767746219253,86.90989057837768,26.337818190162494,-45.6107677948892,19.29230881273779,35.17881250440801,4.208645371248952,19.21819761440245,-72.27608681914413,-107.367763329436,-139.99449117221883],\"Weights\":[{\"Index\":0,\"Value\":-1.4779272757060236},{\"Index\":1,\"Value\":-0.1010504777275428},{\"Index\":2,\"Value\":0},{\"Index\":3,\"Value\":0},{\"Index\":4,\"Value\":0},{\"Index\":5,\"Value\":0},{\"Index\":6,\"Value\":0},{\"Index\":7,\"Value\":0},{\"Index\":8,\"Value\":0},{\"Index\":9,\"Value\":0},{\"Index\":10,\"Value\":0},{\"Index\":11,\"Value\":0},{\"Index\":12,\"Value\":0},{\"Index\":13,\"Value\":0},{\"Index\":14,\"Value\":0},{\"Index\":15,\"Value\":-0.33242502113277433},{\"Index\":16,\"Value\":0},{\"Index\":17,\"Value\":0},{\"Index\":18,\"Value\":-0.07630585832872294},{\"Index\":19,\"Value\":0},{\"Index\":20,\"Value\":0},{\"Index\":21,\"Value\":-0.01672928270338589},{\"Index\":22,\"Value\":0},{\"Index\":23,\"Value\":0},{\"Index\":24,\"Value\":-0.15595901563604705},{\"Index\":25,\"Value\":0},{\"Index\":26,\"Value\":0.018417233408465437},{\"Index\":27,\"Value\":-0.028418052867283418},{\"Index\":28,\"Value\":-0.12658824689053405},{\"Index\":29,\"Value\":0},{\"Index\":30,\"Value\":-0.031030564732466095},{\"Index\":31,\"Value\":0.010141532146565123},{\"Index\":32,\"Value\":0.08623091077751496},{\"Index\":33,\"Value\":-0.06120019550036167},{\"Index\":34,\"Value\":0.14227595063826298},{\"Index\":35,\"Value\":0},{\"Index\":36,\"Value\":0.043977861840113874},{\"Index\":37,\"Value\":0},{\"Index\":38,\"Value\":0.056792303556087075},{\"Index\":39,\"Value\":0},{\"Index\":40,\"Value\":-0.04966150566482726},{\"Index\":41,\"Value\":-0.029870024190715872},{\"Index\":42,\"Value\":-0.23941670941346224},{\"Index\":43,\"Value\":0.0061514464359455475},{\"Index\":44,\"Value\":0},{\"Index\":45,\"Value\":0},{\"Index\":46,\"Value\":0},{\"Index\":47,\"Value\":0.08185488350292769},{\"Index\":48,\"Value\":-0.09996153149814992},{\"Index\":49,\"Value\":0},{\"Index\":50,\"Value\":0.02465955737152033},{\"Index\":51,\"Value\":-0.02975480199943033},{\"Index\":52,\"Value\":0},{\"Index\":53,\"Value\":0},{\"Index\":54,\"Value\":0},{\"Index\":55,\"Value\":0},{\"Index\":56,\"Value\":0},{\"Index\":57,\"Value\":0},{\"Index\":58,\"Value\":0},{\"Index\":59,\"Value\":0},{\"Index\":60,\"Value\":0},{\"Index\":61,\"Value\":0},{\"Index\":62,\"Value\":0},{\"Index\":63,\"Value\":0},{\"Index\":64,\"Value\":0},{\"Index\":65,\"Value\":0},{\"Index\":66,\"Value\":0},{\"Index\":67,\"Value\":-0.33052325096513996},{\"Index\":68,\"Value\":-0.18115445731520993},{\"Index\":69,\"Value\":0},{\"Index\":70,\"Value\":0},{\"Index\":71,\"Value\":-0.11268130143040017},{\"Index\":72,\"Value\":0},{\"Index\":73,\"Value\":-0.08031927634693733},{\"Index\":74,\"Value\":0},{\"Index\":75,\"Value\":0.06870224602853132},{\"Index\":76,\"Value\":-0.08319059254202325},{\"Index\":77,\"Value\":0},{\"Index\":78,\"Value\":-0.0007449429768236666},{\"Index\":79,\"Value\":-0.029653372525846156},{\"Index\":80,\"Value\":0.14266274588159805},{\"Index\":81,\"Value\":-0.031035089477636092},{\"Index\":82,\"Value\":-0.07643968352996366},{\"Index\":83,\"Value\":-0.1253442250745848},{\"Index\":84,\"Value\":0.0213635725146851},{\"Index\":85,\"Value\":0.039387553699227314},{\"Index\":86,\"Value\":0.019430131518771952},{\"Index\":87,\"Value\":-0.06710252405530596},{\"Index\":88,\"Value\":-0.07876989175845005},{\"Index\":89,\"Value\":0.03409690026665958},{\"Index\":90,\"Value\":-0.011549718233978074},{\"Index\":91,\"Value\":0.0013040642748405173},{\"Index\":92,\"Value\":0.057185601166293454},{\"Index\":93,\"Value\":0.06426319729275232},{\"Index\":94,\"Value\":0.054340774213828366},{\"Index\":95,\"Value\":-0.1790832790037008},{\"Index\":96,\"Value\":0.02048911309718199},{\"Index\":97,\"Value\":-0.02552831586303714},{\"Index\":98,\"Value\":-0.13636157678499308},{\"Index\":99,\"Value\":0},{\"Index\":100,\"Value\":-0.0026465688832632054},{\"Index\":101,\"Value\":-0.10035614528953574},{\"Index\":102,\"Value\":0},{\"Index\":103,\"Value\":0},{\"Index\":104,\"Value\":0},{\"Index\":105,\"Value\":0},{\"Index\":106,\"Value\":0},{\"Index\":107,\"Value\":0},{\"Index\":108,\"Value\":0},{\"Index\":109,\"Value\":0},{\"Index\":110,\"Value\":0},{\"Index\":111,\"Value\":0},{\"Index\":112,\"Value\":0},{\"Index\":113,\"Value\":0},{\"Index\":114,\"Value\":0},{\"Index\":115,\"Value\":0.3933186870858013},{\"Index\":116,\"Value\":0.03951963051590951},{\"Index\":117,\"Value\":0.2914022069741411},{\"Index\":118,\"Value\":0.016692728892471056},{\"Index\":119,\"Value\":0.04424990106972679},{\"Index\":120,\"Value\":0.07804222713750028},{\"Index\":121,\"Value\":0.12421986243675795},{\"Index\":122,\"Value\":0},{\"Index\":123,\"Value\":0.008822590939578429},{\"Index\":124,\"Value\":0.13188446946602356},{\"Index\":125,\"Value\":0.013633516290993698},{\"Index\":126,\"Value\":-0.12637706553537165},{\"Index\":127,\"Value\":-0.08664626419628602},{\"Index\":128,\"Value\":0.018571226736653557},{\"Index\":129,\"Value\":-0.14185307920484402},{\"Index\":130,\"Value\":-0.08214466220020622},{\"Index\":131,\"Value\":-0.06004932984460917},{\"Index\":132,\"Value\":-0.08706521505450611},{\"Index\":133,\"Value\":-0.18657086866302966},{\"Index\":134,\"Value\":-0.23170685636069785},{\"Index\":135,\"Value\":0.019145119969390244},{\"Index\":136,\"Value\":-0.044133564926829315},{\"Index\":137,\"Value\":-0.14833631339907188},{\"Index\":138,\"Value\":-0.14195987947632888},{\"Index\":139,\"Value\":-0.11227922296061607},{\"Index\":140,\"Value\":0},{\"Index\":141,\"Value\":-0.2248545739862912},{\"Index\":142,\"Value\":-0.053601196254474924},{\"Index\":143,\"Value\":-0.09245680133299798},{\"Index\":144,\"Value\":-0.06568366197198114},{\"Index\":145,\"Value\":-0.09035817894119408},{\"Index\":146,\"Value\":0},{\"Index\":147,\"Value\":-0.11210511498379819},{\"Index\":148,\"Value\":0.0722085989288296},{\"Index\":149,\"Value\":-0.03725039974646572},{\"Index\":150,\"Value\":0},{\"Index\":151,\"Value\":-0.09941678794148355},{\"Index\":152,\"Value\":0},{\"Index\":153,\"Value\":0},{\"Index\":154,\"Value\":0},{\"Index\":155,\"Value\":0},{\"Index\":156,\"Value\":0},{\"Index\":157,\"Value\":0},{\"Index\":158,\"Value\":0},{\"Index\":159,\"Value\":0},{\"Index\":160,\"Value\":0},{\"Index\":161,\"Value\":0},{\"Index\":162,\"Value\":0},{\"Index\":163,\"Value\":0},{\"Index\":164,\"Value\":0},{\"Index\":165,\"Value\":0.24562119715975064},{\"Index\":166,\"Value\":-0.06168818728757876},{\"Index\":167,\"Value\":-0.058095767523429084},{\"Index\":168,\"Value\":0.06439417625821522},{\"Index\":169,\"Value\":0.07641511696364015},{\"Index\":170,\"Value\":0.1352321646238959},{\"Index\":171,\"Value\":0.1303002677379283},{\"Index\":172,\"Value\":0.16987334877283608},{\"Index\":173,\"Value\":0.0026151949039369665},{\"Index\":174,\"Value\":0},{\"Index\":175,\"Value\":-0.1288767020463479},{\"Index\":176,\"Value\":0},{\"Index\":177,\"Value\":-0.004760815750220782},{\"Index\":178,\"Value\":0},{\"Index\":179,\"Value\":0.03826902768903081},{\"Index\":180,\"Value\":-0.020421943581587127},{\"Index\":181,\"Value\":-0.043397527676691035},{\"Index\":182,\"Value\":-0.12871573660948027},{\"Index\":183,\"Value\":0},{\"Index\":184,\"Value\":-0.19943732307097023},{\"Index\":185,\"Value\":-0.09951785342571465},{\"Index\":186,\"Value\":-0.1641647270824198},{\"Index\":187,\"Value\":-0.21391771704691714},{\"Index\":188,\"Value\":-0.052695664921468176},{\"Index\":189,\"Value\":0},{\"Index\":190,\"Value\":-0.06991964323544668},{\"Index\":191,\"Value\":0},{\"Index\":192,\"Value\":-0.055660222416132867},{\"Index\":193,\"Value\":-0.14148599736672937},{\"Index\":194,\"Value\":-0.0632168114994435},{\"Index\":195,\"Value\":-0.06105751305293734},{\"Index\":196,\"Value\":0},{\"Index\":197,\"Value\":0.0028443127479426695},{\"Index\":198,\"Value\":-0.07299653823638899},{\"Index\":199,\"Value\":0.12188468170001751},{\"Index\":200,\"Value\":0},{\"Index\":201,\"Value\":-0.026134452599074064},{\"Index\":202,\"Value\":0},{\"Index\":203,\"Value\":0},{\"Index\":204,\"Value\":0},{\"Index\":205,\"Value\":0},{\"Index\":206,\"Value\":0},{\"Index\":207,\"Value\":0},{\"Index\":208,\"Value\":0},{\"Index\":209,\"Value\":0},{\"Index\":210,\"Value\":0},{\"Index\":211,\"Value\":0},{\"Index\":212,\"Value\":0},{\"Index\":213,\"Value\":0},{\"Index\":214,\"Value\":0},{\"Index\":215,\"Value\":0},{\"Index\":216,\"Value\":0},{\"Index\":217,\"Value\":-0.04244118223632566},{\"Index\":218,\"Value\":0.23838177407968666},{\"Index\":219,\"Value\":0.1048425306964982},{\"Index\":220,\"Value\":0},{\"Index\":221,\"Value\":-0.0067845726713040115},{\"Index\":222,\"Value\":0.2617624423475148},{\"Index\":223,\"Value\":0.08707253381422224},{\"Index\":224,\"Value\":0.15814062765868153},{\"Index\":225,\"Value\":-0.05952014887801148},{\"Index\":226,\"Value\":-0.08825532468978892},{\"Index\":227,\"Value\":0.056049154444073976},{\"Index\":228,\"Value\":0.07355642517442192},{\"Index\":229,\"Value\":-0.0021016621825693045},{\"Index\":230,\"Value\":-0.10606912702390864},{\"Index\":231,\"Value\":0},{\"Index\":232,\"Value\":-0.09424962839608383},{\"Index\":233,\"Value\":-0.001202173653559366},{\"Index\":234,\"Value\":-0.011255463453480125},{\"Index\":235,\"Value\":0.05698660953700833},{\"Index\":236,\"Value\":-0.1493745005044449},{\"Index\":237,\"Value\":-0.17011495878108304},{\"Index\":238,\"Value\":-0.04284124939240539},{\"Index\":239,\"Value\":-0.06105913483138634},{\"Index\":240,\"Value\":-0.07670237049150047},{\"Index\":241,\"Value\":-0.02390475544294873},{\"Index\":242,\"Value\":0.09628441099552172},{\"Index\":243,\"Value\":-0.11915161015184912},{\"Index\":244,\"Value\":-0.14694526469251967},{\"Index\":245,\"Value\":-0.024818948138332367},{\"Index\":246,\"Value\":-0.09926993280218721},{\"Index\":247,\"Value\":-0.09674229376254827},{\"Index\":248,\"Value\":-0.24896398395243335},{\"Index\":249,\"Value\":-0.017468687810397395},{\"Index\":250,\"Value\":-0.0412768284011433},{\"Index\":251,\"Value\":-0.028384197456945825},{\"Index\":252,\"Value\":0},{\"Index\":253,\"Value\":0},{\"Index\":254,\"Value\":0},{\"Index\":255,\"Value\":0},{\"Index\":256,\"Value\":0},{\"Index\":257,\"Value\":0},{\"Index\":258,\"Value\":0},{\"Index\":259,\"Value\":0},{\"Index\":260,\"Value\":0},{\"Index\":261,\"Value\":0},{\"Index\":262,\"Value\":0},{\"Index\":263,\"Value\":0},{\"Index\":264,\"Value\":0},{\"Index\":265,\"Value\":0},{\"Index\":266,\"Value\":0},{\"Index\":267,\"Value\":-0.03511344968579675},{\"Index\":268,\"Value\":0},{\"Index\":269,\"Value\":0},{\"Index\":270,\"Value\":0.08726794718466316},{\"Index\":271,\"Value\":-0.020347662588560675},{\"Index\":272,\"Value\":0.001351646261071754},{\"Index\":273,\"Value\":0.10750928938241074},{\"Index\":274,\"Value\":-0.13910727092722544},{\"Index\":275,\"Value\":0.002647022577661101},{\"Index\":276,\"Value\":0.08543889991886151},{\"Index\":277,\"Value\":0},{\"Index\":278,\"Value\":-0.017813902918945558},{\"Index\":279,\"Value\":-0.020757029888331703},{\"Index\":280,\"Value\":0.024201167148374638},{\"Index\":281,\"Value\":0},{\"Index\":282,\"Value\":-0.11274224319829047},{\"Index\":283,\"Value\":0.0019627807715764034},{\"Index\":284,\"Value\":-0.08298653010593755},{\"Index\":285,\"Value\":-0.11996544363078007},{\"Index\":286,\"Value\":-0.133020085845755},{\"Index\":287,\"Value\":0.01590280284910372},{\"Index\":288,\"Value\":-0.036985940511558624},{\"Index\":289,\"Value\":0},{\"Index\":290,\"Value\":-0.009756852266935644},{\"Index\":291,\"Value\":-0.14122904920471588},{\"Index\":292,\"Value\":-0.09031602249577708},{\"Index\":293,\"Value\":-0.046597786994937176},{\"Index\":294,\"Value\":-0.009557032222157709},{\"Index\":295,\"Value\":-0.013185614690775548},{\"Index\":296,\"Value\":0},{\"Index\":297,\"Value\":-0.024620060862990973},{\"Index\":298,\"Value\":0.019475850679210784},{\"Index\":299,\"Value\":-0.019601134997808765},{\"Index\":300,\"Value\":0},{\"Index\":301,\"Value\":-0.03002839326578588},{\"Index\":302,\"Value\":0},{\"Index\":303,\"Value\":0},{\"Index\":304,\"Value\":0},{\"Index\":305,\"Value\":0},{\"Index\":306,\"Value\":0},{\"Index\":307,\"Value\":0},{\"Index\":308,\"Value\":0},{\"Index\":309,\"Value\":0},{\"Index\":310,\"Value\":0},{\"Index\":311,\"Value\":0},{\"Index\":312,\"Value\":0},{\"Index\":313,\"Value\":0},{\"Index\":314,\"Value\":0},{\"Index\":315,\"Value\":0},{\"Index\":316,\"Value\":0},{\"Index\":317,\"Value\":-0.06234031950670516},{\"Index\":318,\"Value\":0},{\"Index\":319,\"Value\":0.07653455805802785},{\"Index\":320,\"Value\":0.11297918817310384},{\"Index\":321,\"Value\":-0.0007390073070060705},{\"Index\":322,\"Value\":0.09183050379070591},{\"Index\":323,\"Value\":0.0088419349049573},{\"Index\":324,\"Value\":-0.09044846401067631},{\"Index\":325,\"Value\":0},{\"Index\":326,\"Value\":0.03244361723471285},{\"Index\":327,\"Value\":0},{\"Index\":328,\"Value\":0.0018227517864723988},{\"Index\":329,\"Value\":0.1487838734128178},{\"Index\":330,\"Value\":-0.060501604347832014},{\"Index\":331,\"Value\":-0.002492397703288765},{\"Index\":332,\"Value\":-0.023134606645917835},{\"Index\":333,\"Value\":0},{\"Index\":334,\"Value\":0.05924923323364473},{\"Index\":335,\"Value\":-0.0748469475476534},{\"Index\":336,\"Value\":-0.010650880087558717},{\"Index\":337,\"Value\":0.10991014041246103},{\"Index\":338,\"Value\":0.10941901617438991},{\"Index\":339,\"Value\":-0.009610090411167026},{\"Index\":340,\"Value\":0},{\"Index\":341,\"Value\":-0.07006858580605803},{\"Index\":342,\"Value\":-0.03645115975875417},{\"Index\":343,\"Value\":0},{\"Index\":344,\"Value\":-0.07580125343054699},{\"Index\":345,\"Value\":-0.07821453447871014},{\"Index\":346,\"Value\":-0.29751618838558214},{\"Index\":347,\"Value\":-0.09729807920514667},{\"Index\":348,\"Value\":-0.23730018396454072},{\"Index\":349,\"Value\":-0.2079911176352135},{\"Index\":350,\"Value\":-0.30341405390125537},{\"Index\":351,\"Value\":-0.027624630712224495},{\"Index\":352,\"Value\":0},{\"Index\":353,\"Value\":0},{\"Index\":354,\"Value\":0},{\"Index\":355,\"Value\":0},{\"Index\":356,\"Value\":0},{\"Index\":357,\"Value\":0},{\"Index\":358,\"Value\":0},{\"Index\":359,\"Value\":0},{\"Index\":360,\"Value\":0.23010225510624263},{\"Index\":361,\"Value\":-0.1648667393199586},{\"Index\":362,\"Value\":0.15366267421049523},{\"Index\":363,\"Value\":0},{\"Index\":364,\"Value\":-0.16737737963428662},{\"Index\":365,\"Value\":0},{\"Index\":366,\"Value\":-0.12805658764118066},{\"Index\":367,\"Value\":-0.19249903779276847},{\"Index\":368,\"Value\":-0.05415563274132583},{\"Index\":369,\"Value\":-0.1794417091150052},{\"Index\":370,\"Value\":-0.1278596710305181},{\"Index\":371,\"Value\":-0.1434050490115748},{\"Index\":372,\"Value\":-0.0825469705811546},{\"Index\":373,\"Value\":-0.09060554501645379},{\"Index\":374,\"Value\":-0.08596369313858938},{\"Index\":375,\"Value\":-0.012677021623307676},{\"Index\":376,\"Value\":-0.16330965390529595},{\"Index\":377,\"Value\":0},{\"Index\":378,\"Value\":0.06168774211983624},{\"Index\":379,\"Value\":0.010625314701414796},{\"Index\":380,\"Value\":0.05448630137816441},{\"Index\":381,\"Value\":-0.016700967627461445},{\"Index\":382,\"Value\":0},{\"Index\":383,\"Value\":0},{\"Index\":384,\"Value\":0},{\"Index\":385,\"Value\":0},{\"Index\":386,\"Value\":0},{\"Index\":387,\"Value\":0},{\"Index\":388,\"Value\":0},{\"Index\":389,\"Value\":0},{\"Index\":390,\"Value\":-0.10635931397774373},{\"Index\":391,\"Value\":-0.17967081730443235},{\"Index\":392,\"Value\":-0.251777800168464},{\"Index\":393,\"Value\":0.04656298157395058},{\"Index\":394,\"Value\":-0.1707893335879888},{\"Index\":395,\"Value\":-0.055410563929686026},{\"Index\":396,\"Value\":-0.0989453088493529},{\"Index\":397,\"Value\":-0.07553156877866521},{\"Index\":398,\"Value\":-0.15007778203527838},{\"Index\":399,\"Value\":-0.10154100680877737},{\"Index\":400,\"Value\":-0.10930446218363023},{\"Index\":401,\"Value\":-0.08739655493290385},{\"Index\":402,\"Value\":-0.07958312976149762},{\"Index\":403,\"Value\":0.023636353989187446},{\"Index\":404,\"Value\":-0.03698429008350727},{\"Index\":405,\"Value\":0.024586370424733266},{\"Index\":406,\"Value\":0},{\"Index\":407,\"Value\":0.047166362103245985},{\"Index\":408,\"Value\":0.05643391546783894},{\"Index\":409,\"Value\":0.010089018483711111},{\"Index\":410,\"Value\":0.08880889578507342},{\"Index\":411,\"Value\":-0.34193658868670856},{\"Index\":412,\"Value\":0},{\"Index\":413,\"Value\":0},{\"Index\":414,\"Value\":0},{\"Index\":415,\"Value\":0},{\"Index\":416,\"Value\":0},{\"Index\":417,\"Value\":0},{\"Index\":418,\"Value\":0},{\"Index\":419,\"Value\":0},{\"Index\":420,\"Value\":0},{\"Index\":421,\"Value\":0},{\"Index\":422,\"Value\":0},{\"Index\":423,\"Value\":0},{\"Index\":424,\"Value\":0},{\"Index\":425,\"Value\":0},{\"Index\":426,\"Value\":0},{\"Index\":427,\"Value\":0},{\"Index\":428,\"Value\":0},{\"Index\":429,\"Value\":0},{\"Index\":430,\"Value\":0},{\"Index\":431,\"Value\":0},{\"Index\":432,\"Value\":0},{\"Index\":433,\"Value\":0},{\"Index\":434,\"Value\":0},{\"Index\":435,\"Value\":0},{\"Index\":436,\"Value\":0},{\"Index\":437,\"Value\":0},{\"Index\":438,\"Value\":0},{\"Index\":439,\"Value\":-0.16738864956199015},{\"Index\":440,\"Value\":0},{\"Index\":441,\"Value\":0},{\"Index\":442,\"Value\":-0.14150809267220577},{\"Index\":443,\"Value\":0},{\"Index\":444,\"Value\":-0.10953600629066382},{\"Index\":445,\"Value\":0},{\"Index\":446,\"Value\":-0.09238132616383238},{\"Index\":447,\"Value\":-0.001284607271201425},{\"Index\":448,\"Value\":-0.11329024085518187},{\"Index\":449,\"Value\":-0.13239738374238413},{\"Index\":450,\"Value\":-0.08144271318053008},{\"Index\":451,\"Value\":-0.004950916815761732},{\"Index\":452,\"Value\":0.022785199469542387},{\"Index\":453,\"Value\":-0.08664023139846767},{\"Index\":454,\"Value\":-0.17856945986796557},{\"Index\":455,\"Value\":0.042436240287842306},{\"Index\":456,\"Value\":0.07695900556150803},{\"Index\":457,\"Value\":0.0325004200188577},{\"Index\":458,\"Value\":0.07379076124228329},{\"Index\":459,\"Value\":0},{\"Index\":460,\"Value\":0.11322093153526247},{\"Index\":461,\"Value\":-0.23028691199424026},{\"Index\":462,\"Value\":0},{\"Index\":463,\"Value\":0},{\"Index\":464,\"Value\":0},{\"Index\":465,\"Value\":0},{\"Index\":466,\"Value\":0},{\"Index\":467,\"Value\":0},{\"Index\":468,\"Value\":0},{\"Index\":469,\"Value\":0},{\"Index\":470,\"Value\":0},{\"Index\":471,\"Value\":0},{\"Index\":472,\"Value\":0},{\"Index\":473,\"Value\":0},{\"Index\":474,\"Value\":0},{\"Index\":475,\"Value\":0},{\"Index\":476,\"Value\":0},{\"Index\":477,\"Value\":0},{\"Index\":478,\"Value\":0},{\"Index\":479,\"Value\":0},{\"Index\":480,\"Value\":0},{\"Index\":481,\"Value\":0},{\"Index\":482,\"Value\":0},{\"Index\":483,\"Value\":0},{\"Index\":484,\"Value\":0},{\"Index\":485,\"Value\":0},{\"Index\":486,\"Value\":0},{\"Index\":487,\"Value\":0},{\"Index\":488,\"Value\":0},{\"Index\":489,\"Value\":0},{\"Index\":490,\"Value\":0},{\"Index\":491,\"Value\":0},{\"Index\":492,\"Value\":-0.0509534967918018},{\"Index\":493,\"Value\":0},{\"Index\":494,\"Value\":0},{\"Index\":495,\"Value\":-0.20871540226801033},{\"Index\":496,\"Value\":0},{\"Index\":497,\"Value\":-0.193203784669162},{\"Index\":498,\"Value\":-0.11299447189260199},{\"Index\":499,\"Value\":0},{\"Index\":500,\"Value\":-0.10360995380569547},{\"Index\":501,\"Value\":0},{\"Index\":502,\"Value\":0.07174733021984694},{\"Index\":503,\"Value\":-0.02251162983368247},{\"Index\":504,\"Value\":0.02620818307045912},{\"Index\":505,\"Value\":0.04294741081172557},{\"Index\":506,\"Value\":0.03161407353424455},{\"Index\":507,\"Value\":-0.19065605427146476},{\"Index\":508,\"Value\":-0.2965549110871348},{\"Index\":509,\"Value\":-0.1608796390924889},{\"Index\":510,\"Value\":-0.06830250628227891},{\"Index\":511,\"Value\":0.25125452372779655},{\"Index\":512,\"Value\":0},{\"Index\":513,\"Value\":0},{\"Index\":514,\"Value\":0},{\"Index\":515,\"Value\":0},{\"Index\":516,\"Value\":0},{\"Index\":517,\"Value\":0},{\"Index\":518,\"Value\":0.40410352590577997},{\"Index\":519,\"Value\":0.2642174973895443},{\"Index\":520,\"Value\":0.1770429132426036},{\"Index\":521,\"Value\":0.08182086148763049},{\"Index\":522,\"Value\":0.11393134973451934},{\"Index\":523,\"Value\":0.12087992257398354},{\"Index\":524,\"Value\":-0.03967608076042762},{\"Index\":525,\"Value\":-0.042415874020336676},{\"Index\":526,\"Value\":-0.01570830310329031},{\"Index\":527,\"Value\":-0.12564657121442915},{\"Index\":528,\"Value\":-0.14398723003572841},{\"Index\":529,\"Value\":-0.1694930717438813},{\"Index\":530,\"Value\":-0.15083644128588167},{\"Index\":531,\"Value\":-0.14646757632756177},{\"Index\":532,\"Value\":-0.09193494703171148},{\"Index\":533,\"Value\":0},{\"Index\":534,\"Value\":0},{\"Index\":535,\"Value\":-0.11010279625376404},{\"Index\":536,\"Value\":-0.03784255279272709},{\"Index\":537,\"Value\":-0.11739470329806384},{\"Index\":538,\"Value\":-0.024424279263644426},{\"Index\":539,\"Value\":-0.07604359658211005},{\"Index\":540,\"Value\":-0.052713422405485585},{\"Index\":541,\"Value\":-0.12210162124134376},{\"Index\":542,\"Value\":-0.026235445359510792},{\"Index\":543,\"Value\":0.03154735169379738},{\"Index\":544,\"Value\":-0.07469813792820439},{\"Index\":545,\"Value\":-0.041921317618882514},{\"Index\":546,\"Value\":-0.08496955655885823},{\"Index\":547,\"Value\":0.005048306719061678},{\"Index\":548,\"Value\":-0.02060196379741933},{\"Index\":549,\"Value\":-0.00605794771529852},{\"Index\":550,\"Value\":-0.090018201418904},{\"Index\":551,\"Value\":-0.0009427919159602581},{\"Index\":552,\"Value\":-0.061755118465299186},{\"Index\":553,\"Value\":0},{\"Index\":554,\"Value\":0.05746419699705682},{\"Index\":555,\"Value\":0},{\"Index\":556,\"Value\":0},{\"Index\":557,\"Value\":-0.10734679513531498},{\"Index\":558,\"Value\":-0.1289222282993371},{\"Index\":559,\"Value\":-0.07004657848683829},{\"Index\":560,\"Value\":-0.05630957508914591},{\"Index\":561,\"Value\":-0.1496298953403448},{\"Index\":562,\"Value\":0},{\"Index\":563,\"Value\":0},{\"Index\":564,\"Value\":0},{\"Index\":565,\"Value\":0},{\"Index\":566,\"Value\":0},{\"Index\":567,\"Value\":0},{\"Index\":568,\"Value\":0},{\"Index\":569,\"Value\":0},{\"Index\":570,\"Value\":0},{\"Index\":571,\"Value\":0},{\"Index\":572,\"Value\":0},{\"Index\":573,\"Value\":0},{\"Index\":574,\"Value\":0},{\"Index\":575,\"Value\":0},{\"Index\":576,\"Value\":0},{\"Index\":577,\"Value\":0},{\"Index\":578,\"Value\":0},{\"Index\":579,\"Value\":0},{\"Index\":580,\"Value\":0},{\"Index\":581,\"Value\":0},{\"Index\":582,\"Value\":0},{\"Index\":583,\"Value\":0},{\"Index\":584,\"Value\":0},{\"Index\":585,\"Value\":0},{\"Index\":586,\"Value\":0.01697767963856862},{\"Index\":587,\"Value\":0.0385962349742899},{\"Index\":588,\"Value\":0},{\"Index\":589,\"Value\":-0.11831903506623694},{\"Index\":590,\"Value\":-0.16277592591380982},{\"Index\":591,\"Value\":0.1077069424257725},{\"Index\":592,\"Value\":0.04445283497986528},{\"Index\":593,\"Value\":0.1104486900045138},{\"Index\":594,\"Value\":-0.050662668037484176},{\"Index\":595,\"Value\":-0.03999348381503062},{\"Index\":596,\"Value\":-0.16203812658602007},{\"Index\":597,\"Value\":-0.0014873535814632448},{\"Index\":598,\"Value\":-0.04679252124604933},{\"Index\":599,\"Value\":-0.04397396043632898},{\"Index\":600,\"Value\":-0.05550711175539813},{\"Index\":601,\"Value\":0.06673071365533752},{\"Index\":602,\"Value\":-0.05667470799459553},{\"Index\":603,\"Value\":-0.031056884832022208},{\"Index\":604,\"Value\":0},{\"Index\":605,\"Value\":0.03608590231415034},{\"Index\":606,\"Value\":-0.053692570008819517},{\"Index\":607,\"Value\":-0.07902222383266938},{\"Index\":608,\"Value\":0.03030562038842987},{\"Index\":609,\"Value\":-0.14060315579528646},{\"Index\":610,\"Value\":-0.45814076266198617},{\"Index\":611,\"Value\":-0.46971069038504315},{\"Index\":612,\"Value\":0},{\"Index\":613,\"Value\":0},{\"Index\":614,\"Value\":0},{\"Index\":615,\"Value\":0},{\"Index\":616,\"Value\":0},{\"Index\":617,\"Value\":0},{\"Index\":618,\"Value\":0},{\"Index\":619,\"Value\":0},{\"Index\":620,\"Value\":0},{\"Index\":621,\"Value\":0},{\"Index\":622,\"Value\":0},{\"Index\":623,\"Value\":0},{\"Index\":624,\"Value\":0},{\"Index\":625,\"Value\":0},{\"Index\":626,\"Value\":0},{\"Index\":627,\"Value\":0},{\"Index\":628,\"Value\":0},{\"Index\":629,\"Value\":0},{\"Index\":630,\"Value\":0},{\"Index\":631,\"Value\":0},{\"Index\":632,\"Value\":0},{\"Index\":633,\"Value\":0},{\"Index\":634,\"Value\":0},{\"Index\":635,\"Value\":0},{\"Index\":636,\"Value\":-0.3427884172642561},{\"Index\":637,\"Value\":0},{\"Index\":638,\"Value\":0},{\"Index\":639,\"Value\":-0.12916392757964157},{\"Index\":640,\"Value\":0},{\"Index\":641,\"Value\":-0.16529044741859167},{\"Index\":642,\"Value\":0},{\"Index\":643,\"Value\":-0.07830472131528472},{\"Index\":644,\"Value\":-0.05224373416307933},{\"Index\":645,\"Value\":0},{\"Index\":646,\"Value\":-0.05039165473629014},{\"Index\":647,\"Value\":0.025811580578190087},{\"Index\":648,\"Value\":-0.03950710331847616},{\"Index\":649,\"Value\":-0.07996465138594273},{\"Index\":650,\"Value\":-0.08658936922010872},{\"Index\":651,\"Value\":-0.027607462353554674},{\"Index\":652,\"Value\":-0.0572232956349921},{\"Index\":653,\"Value\":0.00669318844510204},{\"Index\":654,\"Value\":0.07158641002576645},{\"Index\":655,\"Value\":0.07582580348867718},{\"Index\":656,\"Value\":0},{\"Index\":657,\"Value\":0.11873538047145649},{\"Index\":658,\"Value\":0.09554494374708723},{\"Index\":659,\"Value\":0.12225889698011445},{\"Index\":660,\"Value\":0.06029834910854394},{\"Index\":661,\"Value\":-0.43238241025461227},{\"Index\":662,\"Value\":0},{\"Index\":663,\"Value\":0},{\"Index\":664,\"Value\":0},{\"Index\":665,\"Value\":0},{\"Index\":666,\"Value\":0},{\"Index\":667,\"Value\":0},{\"Index\":668,\"Value\":0},{\"Index\":669,\"Value\":0},{\"Index\":670,\"Value\":0},{\"Index\":671,\"Value\":0},{\"Index\":672,\"Value\":0},{\"Index\":673,\"Value\":0},{\"Index\":674,\"Value\":-0.2631697659092498},{\"Index\":675,\"Value\":0},{\"Index\":676,\"Value\":0},{\"Index\":677,\"Value\":-0.30622714855939254},{\"Index\":678,\"Value\":0},{\"Index\":679,\"Value\":-0.42710530282458065},{\"Index\":680,\"Value\":-0.13387893299087594},{\"Index\":681,\"Value\":-0.09310372355437882},{\"Index\":682,\"Value\":-0.025786504010168076},{\"Index\":683,\"Value\":-0.11282104131392777},{\"Index\":684,\"Value\":-0.15415317430932174},{\"Index\":685,\"Value\":-0.1510675916265114},{\"Index\":686,\"Value\":0.07157699739153686},{\"Index\":687,\"Value\":-0.12480319415901661},{\"Index\":688,\"Value\":-0.01849014726319657},{\"Index\":689,\"Value\":0},{\"Index\":690,\"Value\":0},{\"Index\":691,\"Value\":-0.06282728940801885},{\"Index\":692,\"Value\":0.012601928945436146},{\"Index\":693,\"Value\":0.1340976241729743},{\"Index\":694,\"Value\":0.19461680976262433},{\"Index\":695,\"Value\":0.1291112471254965},{\"Index\":696,\"Value\":-0.0367567631404303},{\"Index\":697,\"Value\":0.01655432494592294},{\"Index\":698,\"Value\":0.0837516953585842},{\"Index\":699,\"Value\":0.12522684181062801},{\"Index\":700,\"Value\":0.1266914758287327},{\"Index\":701,\"Value\":0.08443396632150338},{\"Index\":702,\"Value\":0.13507022492833481},{\"Index\":703,\"Value\":-0.04309331602150796},{\"Index\":704,\"Value\":0},{\"Index\":705,\"Value\":0.029765348914594553},{\"Index\":706,\"Value\":0.11084145492894355},{\"Index\":707,\"Value\":-0.016200467931621255},{\"Index\":708,\"Value\":0.07715446590714013},{\"Index\":709,\"Value\":0.11237907299155094},{\"Index\":710,\"Value\":-0.021606533238853892},{\"Index\":711,\"Value\":-0.4545160104399005},{\"Index\":712,\"Value\":0},{\"Index\":713,\"Value\":0},{\"Index\":714,\"Value\":0},{\"Index\":715,\"Value\":0},{\"Index\":716,\"Value\":0},{\"Index\":717,\"Value\":0},{\"Index\":718,\"Value\":0},{\"Index\":719,\"Value\":0},{\"Index\":720,\"Value\":0},{\"Index\":721,\"Value\":0},{\"Index\":722,\"Value\":0},{\"Index\":723,\"Value\":0},{\"Index\":724,\"Value\":0},{\"Index\":725,\"Value\":0},{\"Index\":726,\"Value\":0},{\"Index\":727,\"Value\":0},{\"Index\":728,\"Value\":0},{\"Index\":729,\"Value\":0},{\"Index\":730,\"Value\":0},{\"Index\":731,\"Value\":0},{\"Index\":732,\"Value\":0},{\"Index\":733,\"Value\":0},{\"Index\":734,\"Value\":0},{\"Index\":735,\"Value\":0},{\"Index\":736,\"Value\":0},{\"Index\":737,\"Value\":0},{\"Index\":738,\"Value\":0},{\"Index\":739,\"Value\":0},{\"Index\":740,\"Value\":0},{\"Index\":741,\"Value\":0},{\"Index\":742,\"Value\":0},{\"Index\":743,\"Value\":0},{\"Index\":744,\"Value\":0},{\"Index\":745,\"Value\":0},{\"Index\":746,\"Value\":0},{\"Index\":747,\"Value\":-0.07548865361636978},{\"Index\":748,\"Value\":0},{\"Index\":749,\"Value\":-0.1105613490538271},{\"Index\":750,\"Value\":0},{\"Index\":751,\"Value\":-0.1682451131158016},{\"Index\":752,\"Value\":-0.037559236275897745},{\"Index\":753,\"Value\":0.04985683848297321},{\"Index\":754,\"Value\":0.04468364736983161},{\"Index\":755,\"Value\":-0.13363366124903694},{\"Index\":756,\"Value\":-0.2049751570901042},{\"Index\":757,\"Value\":-0.06628411965188595},{\"Index\":758,\"Value\":-0.16218431573384565},{\"Index\":759,\"Value\":-0.11442974440566965},{\"Index\":760,\"Value\":-0.17668382354165946},{\"Index\":761,\"Value\":0.13344361622791173},{\"Index\":762,\"Value\":0},{\"Index\":763,\"Value\":0},{\"Index\":764,\"Value\":0},{\"Index\":765,\"Value\":0},{\"Index\":766,\"Value\":0},{\"Index\":767,\"Value\":0},{\"Index\":768,\"Value\":0},{\"Index\":769,\"Value\":0},{\"Index\":770,\"Value\":0},{\"Index\":771,\"Value\":0},{\"Index\":772,\"Value\":0},{\"Index\":773,\"Value\":0},{\"Index\":774,\"Value\":0},{\"Index\":775,\"Value\":0},{\"Index\":776,\"Value\":0},{\"Index\":777,\"Value\":0},{\"Index\":778,\"Value\":0},{\"Index\":779,\"Value\":0},{\"Index\":780,\"Value\":0},{\"Index\":781,\"Value\":-0.08145479296838111},{\"Index\":782,\"Value\":0},{\"Index\":783,\"Value\":0},{\"Index\":784,\"Value\":-0.19708319751243913},{\"Index\":785,\"Value\":0},{\"Index\":786,\"Value\":-0.2442281977750733},{\"Index\":787,\"Value\":0},{\"Index\":788,\"Value\":-0.12202390901516963},{\"Index\":789,\"Value\":-0.25144224215810784},{\"Index\":790,\"Value\":0},{\"Index\":791,\"Value\":-0.22568080196148},{\"Index\":792,\"Value\":-0.10248395483687528},{\"Index\":793,\"Value\":-0.1524212701254243},{\"Index\":794,\"Value\":-0.15359525226947993},{\"Index\":795,\"Value\":-0.3892030265325553},{\"Index\":796,\"Value\":-0.25387382586952884},{\"Index\":797,\"Value\":0},{\"Index\":798,\"Value\":-0.11071517643564802},{\"Index\":799,\"Value\":0.04764108403808323},{\"Index\":800,\"Value\":-0.1369254850858049},{\"Index\":801,\"Value\":-0.2227685911222457},{\"Index\":802,\"Value\":-0.05053209958723306},{\"Index\":803,\"Value\":0.10034091358414243},{\"Index\":804,\"Value\":-0.02859237687066819},{\"Index\":805,\"Value\":-0.0732758624534083},{\"Index\":806,\"Value\":0},{\"Index\":807,\"Value\":-0.02794845934845521},{\"Index\":808,\"Value\":0.1741060540268662},{\"Index\":809,\"Value\":0.253567865193915},{\"Index\":810,\"Value\":0.3358030377966609}],\"Init\":true}"
	instances := []string {"0 40:1 91:1 145:1 195:1 244:1 294:1 340:1 374:1 404:1 460:1 500:1 556:1 608:1 611:1 661:1 711:1 799:1",
	"0 47:1 97:1 144:1 198:1 246:1 299:1 347:1 377:1 408:1 457:1 510:1 537:1 610:1 659:1 703:1 757:1 788:1",
	"1 1:1 51:1 101:1 151:1 201:1 251:1 301:1 351:1 381:1 411:1 461:1 556:1 561:1 647:1 699:1 711:1 808:1",
	"1 1:1 51:1 101:1 151:1 201:1 251:1 301:1 351:1 381:1 411:1 461:1 556:1 561:1 647:1 699:1 711:1 808:1",
	"0 48:1 98:1 145:1 194:1 242:1 289:1 347:1 377:1 405:1 411:1 461:1 550:1 561:1 611:1 701:1 711:1 805:1",
	"0 37:1 88:1 137:1 190:1 239:1 292:1 341:1 376:1 407:1 439:1 509:1 529:1 607:1 643:1 685:1 753:1 793:1"}
	var lff trainer.LockFreeFtrlTrainer
	lff.Initialize(20,4,false)
	
	model, _ = lff.TrainOnline(w,model,instances, fmt.Fprintf)
	fmt.Fprintf(w, model)
}

/*
 * 离线模型请求串格式
 * http://127.0.0.1:8080/offline?biz=[model name]&src=[hdfs/local]&dst=[redis/json]
                &alpha=[0.1]&beta=[0.1]&l1=[10]&l2=[10]&dropout=[0.1]&epoch=[2]
				&push=[push step]&fetch=[fetch step]&threads=[threads number]
				&train=[train file name]&test=[test file name]&debug=[off]&thd=[threshold]
*/
func (lan *Lands) offlineServeHttp(w http.ResponseWriter, par *util.ModelParam) {
	var base_path, model_path, train_path, test_path string
	var predict_path string
	var wr io.Writer
	if par.Debug == "on"{
		wr = w
	} else if par.Debug == "off"{
		wr = os.Stdout
	}
	
	base_path = lan.conf.DataPathBase + par.Biz + "/off/"
	
	err := util.Mkdir(base_path) 
	if err != nil {
		fmt.Fprintf(w, err.Error())
		return
	}
		
	//建立模型训练本地路径
	
	//挂载数据
	if par.Src == "hdfs" {
				
	} else if par.Src == "local" {
		model_path = base_path + "model.dat"
		train_path = base_path + "train.dat"
		test_path = base_path + "test.dat"
		predict_path = base_path + "predict.dat"
		util.CopyFile(train_path, par.Train)
		util.CopyFile(test_path, par.Test)
		fmt.Fprintf(wr, "model path=%s,train path=%s, test path=%s\n", 
					model_path,
					train_path,
					test_path)
	}
	
	//训练数据格式检查及转换
	err = lan.checkData(train_path)
	if err != nil {
		fmt.Fprintf(w, err.Error())
		return
	}
	err = lan.checkData(test_path)
	if err != nil {
		fmt.Fprintf(w, err.Error())
		return
	}

	//模型训练
	var fft trainer.FastFtrlTrainer
	fft.Initialize(par.Epoch, par.Threads, false, 1, par.Push, par.Fetch)
	fft.Train(wr,par.Alpha,par.Beta,par.L1,par.L2,par.Dropout,model_path,
				train_path,
				test_path, fmt.Fprintf)
	

	predictor.Run(wr, 3,[]string{test_path,
				model_path,
				predict_path,
				par.Threshold}, fmt.Fprintf)
		
	//模型输出
	if par.Dst == "json" {
		fmt.Fprintf(w,"%s",fft.ParamServer.SaveEncodeModel())
	} else if par.Dst == "redis" {
		
	}
}

func (lan *Lands) ServeHTTP(w http.ResponseWriter, r *http.Request) {
	par := util.ParamParse(r)
 	if h, ok := lan.mux[par.Module]; ok {
        h(w, par)
    }

//    t0 := time.Now()

//    log4pv := lan.log4pv
//    log4sys := util.GetLogger()
//    log4sys.Info("Receive request: %s", r.URL.RawQuery)

//    if r.Method != "POST" {
//	fmt.Fprintf(w, ERR_MSG, "Only POST method supported")
//	return
//    }

//    var req LandsRequest
//    var res LandsResponse
//    var info_in RankInfoIn
//    var info_out RankInfoOut

//    body, err := ioutil.ReadAll(r.Body)
//    if err != nil {
//	fmt.Fprintf(w, ERR_MSG, "Read http body error")
//	return
//    }

//    // decoder := json.NewDecoder(r.Body)
//    // err := decoder.Decode(&req)
//    err = json.Unmarshal(body, &req)
//    if err != nil {
//	log4sys.Error(string(body), err)
//	fmt.Fprintf(w, ERR_MSG, "Json format error")
//	return
//    }

//    r.ParseForm()

//    // If "_callback" exists in url, http response is jsonp; 
//    // otherwise http response is json.
//    var callback string
//    s := r.Form["_callback"]
//    if len(s) != 0 {
//	callback = s[0]
//    }

//    err = lan.fillInfoList(&info_in, &req)
//    if err != nil {
//	log4sys.Error("[fillInfoList]", err)
//	Logging(&req, nil, nil, log4pv)
//	msg := fmt.Sprintf(ERR_MSG, "Internal server error")
//	httpResponse(w, callback, msg)
//	return
//    }

//    ranker := lan.askPriceRanker
//    err = ranker.Rank(&info_in, &info_out)
//    if err != nil {
//	log4sys.Error("[Rank]", err)
//	Logging(&req, nil, nil, log4pv)
//	msg := fmt.Sprintf(ERR_MSG, "Internal server error")
//	httpResponse(w, callback, msg)
//	return
//    }

//    lan.parseInfoList(&info_out, &res)

//    b, err := json.Marshal(res)
//    if err != nil {
//	log4sys.Error(err)
//	Logging(&req, &res, &info_out, log4pv)
//	msg := fmt.Sprintf(ERR_MSG, "Internal server error")
//	httpResponse(w, callback, msg)
//	return
//    }

//    Logging(&req, &res, &info_out, log4pv)

//    total_time := time.Now().Sub(t0)
//    log4sys.Debug("Spend total time", total_time)
//    if(total_time > lan.thresTime) {
//	log4sys.Error("Spend total time exceed %d", lan.thresTime)
//    }

//    httpResponse(w, callback, string(b))
}